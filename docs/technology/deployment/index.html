<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="generator" content="Docusaurus v2.0.0-alpha.55">
<link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-158266937-1","auto"),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
<script src="https://opencrvs.github.io/opencrvs-core/js/gitter.js"></script><title data-react-helmet="true">Deployment | OpenCRVS is a digital public good to help achieve universal civil registration and evidence-based decision making in all country contexts</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:title" content="Deployment | OpenCRVS is a digital public good to help achieve universal civil registration and evidence-based decision making in all country contexts"><meta data-react-helmet="true" name="description" content="Once you have configured your resources package and you have OpenCRVS running locally, you are ready to provision and deploy OpenCRVS."><meta data-react-helmet="true" property="og:description" content="Once you have configured your resources package and you have OpenCRVS running locally, you are ready to provision and deploy OpenCRVS."><meta data-react-helmet="true" property="og:url" content="https://opencrvs.github.io//opencrvs-core/docs/technology/deployment"><link data-react-helmet="true" rel="shortcut icon" href="/opencrvs-core/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://opencrvs.github.io//opencrvs-core/docs/technology/deployment"><link rel="stylesheet" href="/opencrvs-core/styles.9c3aa1d0.css">
<link rel="preload" href="/opencrvs-core/styles.b7b53c42.js" as="script">
<link rel="preload" href="/opencrvs-core/runtime~main.58c795d9.js" as="script">
<link rel="preload" href="/opencrvs-core/main.38a90617.js" as="script">
<link rel="preload" href="/opencrvs-core/1.be20b565.js" as="script">
<link rel="preload" href="/opencrvs-core/2.f73ed700.js" as="script">
<link rel="preload" href="/opencrvs-core/3.960e5f24.js" as="script">
<link rel="preload" href="/opencrvs-core/1be78505.d797ccac.js" as="script">
<link rel="preload" href="/opencrvs-core/349c6f4f.d22bee8a.js" as="script">
<link rel="preload" href="/opencrvs-core/d61f2702.0b4df099.js" as="script">
</head>
<body>
<div id="__docusaurus">
<nav class="navbar navbar--light navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/opencrvs-core/"><img class="navbar__logo" src="/opencrvs-core/img/logo.svg" alt="OpenCRVS Logo"><strong class="navbar__title"></strong></a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/opencrvs-core/docs/system_overview/introduction">Docs</a><a class="navbar__item navbar__link" href="/opencrvs-core/docs/community/introduction">Community</a><a target="_blank" rel="noopener noreferrer" href="https://github.com/opencrvs/opencrvs-core" class="navbar__item navbar__link">Code</a></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/opencrvs-core/"><img class="navbar__logo" src="/opencrvs-core/img/logo.svg" alt="OpenCRVS Logo"><strong class="navbar__title"></strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/opencrvs-core/docs/system_overview/introduction">Docs</a></li><li class="menu__list-item"><a class="menu__link" href="/opencrvs-core/docs/community/introduction">Community</a></li><li class="menu__list-item"><a target="_blank" rel="noopener noreferrer" href="https://github.com/opencrvs/opencrvs-core" class="menu__link">Code</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_1kjD"><div class="docSidebarContainer_1cYp"><div class="sidebar_1kLs"><div class="menu menu--responsive menu_w2sC"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_2vk4" xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 32 32" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">System overview</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/opencrvs-core/docs/system_overview/introduction">Introduction</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/opencrvs-core/docs/system_overview/designPrinciples">Design principles</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/opencrvs-core/docs/system_overview/functionalArchitecture">Functional architecture</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/opencrvs-core/docs/system_overview/keyFeatures">Key features</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/opencrvs-core/docs/system_overview/interoperability">Interoperability</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/opencrvs-core/docs/system_overview/configuration">Configuration</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/opencrvs-core/docs/system_overview/siteMap">Sitemap</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">User types</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/opencrvs-core/docs/system_overview/user_types/overviewUserTypes">Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/opencrvs-core/docs/system_overview/user_types/fieldAgents">Field agents</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/opencrvs-core/docs/system_overview/user_types/registrationAgent">Registration agent</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/opencrvs-core/docs/system_overview/user_types/registrationAgentDelAuth">Registration agent with delegated authority</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/opencrvs-core/docs/system_overview/user_types/registrar">Registrar</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/opencrvs-core/docs/system_overview/user_types/registrationManager">Registration manager</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/opencrvs-core/docs/system_overview/user_types/sysAdmin">System administrator</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Core functions</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/opencrvs-core/docs/core_functions/notifyAVitalEvent">Notify a vital event</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/opencrvs-core/docs/core_functions/declareAVitalEvent">Declare a vital event</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/opencrvs-core/docs/core_functions/validateRegisterVitalEvent">Validate &amp; register a vital event</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/opencrvs-core/docs/core_functions/issueACertificate">Issue a certificate</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/opencrvs-core/docs/core_functions/vitalStatisticsExport">Vital statistics export</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/opencrvs-core/docs/core_functions/correctRecord">Correct record</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/opencrvs-core/docs/core_functions/recordVerification">Record verification</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Support functions</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/opencrvs-core/docs/support_functions/login">Login</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/opencrvs-core/docs/support_functions/performanceManagement">Performance management</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/opencrvs-core/docs/support_functions/audit">Audit</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/opencrvs-core/docs/support_functions/learning">Learning</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/opencrvs-core/docs/support_functions/legacyDataImport">Legacy data import</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/opencrvs-core/docs/support_functions/userSupport">User support</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">System admin functions</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/opencrvs-core/docs/system_admin/userTeam">User &amp; team management</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/opencrvs-core/docs/system_admin/contentManagement">Content management</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/opencrvs-core/docs/system_admin/commsManagement">Communications management</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/opencrvs-core/docs/system_admin/configManagement">Configuration management</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Technology</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/opencrvs-core/docs/technology/technologyIntroduction">Introduction</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/opencrvs-core/docs/technology/installation">Installation</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/opencrvs-core/docs/technology/technicalConfiguration">Technical configuration</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/opencrvs-core/docs/technology/technicalInteroperability">Technical interoperability</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/opencrvs-core/docs/technology/deployment">Deployment</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/opencrvs-core/docs/technology/webhooks">Webhook integration</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/opencrvs-core/docs/technology/mediators">Mediators and FHIR</a></li></ul></li></ul></div></div></div><main class="docMainContainer_FFX1"><div class="container padding-vert--lg docItemWrapper_1cc7"><div class="row"><div class="col docItemCol_2GOA"><div class="docItemContainer_2cwg"><article><header><h1 class="docTitle_1vWb">Deployment</h1></header><div class="markdown"><p>Once you have configured your resources package and you have OpenCRVS running locally, you are ready to provision and deploy OpenCRVS.</p><p>The <a href="https://github.com/opencrvs/opencrvs-core">OpenCRVS Core</a> contains a deployment script run via <code>yarn</code> commands in <a href="https://github.com/opencrvs/opencrvs-core/blob/master/package.json">package.json</a> to deploy to a staging, QA or production cluster <a href="https://github.com/opencrvs/opencrvs-core/blob/master/deploy.sh">here</a>.</p><p><code>yarn deploy:qa &lt;Your host&gt; &lt;Dockerhub hash for your OpenCRVS version, git hash or &quot;latest&quot;&gt; &lt;path to your resources package&gt;</code></p><p>OpenCRVS should be deployed on a minimum cluster of 3 nodes, each with the following specifications:</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="8-gb-memory-preferably-16-gb--160-gb-disk--ubuntu-18043-lts-x64"></a>8 GB Memory (preferably 16 GB) / 160 GB Disk / Ubuntu 18.04.3 (LTS) x64<a aria-hidden="true" tabindex="-1" class="hash-link" href="#8-gb-memory-preferably-16-gb--160-gb-disk--ubuntu-18043-lts-x64" title="Direct link to heading">#</a></h4><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="how-can-i-install-and-manage-an-opencrvs-server-cluster-of-nodes"></a>How can I install and manage an OpenCRVS server cluster of nodes?<a aria-hidden="true" tabindex="-1" class="hash-link" href="#how-can-i-install-and-manage-an-opencrvs-server-cluster-of-nodes" title="Direct link to heading">#</a></h2><p>An <a href="https://www.ansible.com/">Ansible</a> playbook script is provided <a href="https://github.com/opencrvs/opencrvs-core/blob/master/infrastructure/server-setup/playbook.yml">here</a> to automate the vast majority of your server cluster setup.</p><p>To prepare your server cluster, some pre-requisites and instructions are documented <a href="https://github.com/opencrvs/opencrvs-core/tree/master/infrastructure/server-setup">here</a>.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="how-can-i-set-up-continuous-integration-and-delivery"></a>How can I set up continuous integration and delivery?<a aria-hidden="true" tabindex="-1" class="hash-link" href="#how-can-i-set-up-continuous-integration-and-delivery" title="Direct link to heading">#</a></h2><p>We provide an example <a href="https://travis-ci.org/">Travis</a> <a href="https://github.com/opencrvs/opencrvs-core/blob/master/.travis.yml">configuration</a> to automate unit testing, end-to-end testing, Docker compose / push to Dockerhub and deployment to a staging environment.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="why-docker-swarm-and-is-there-kubernetes-support"></a>Why Docker Swarm? ...and is there Kubernetes support?<a aria-hidden="true" tabindex="-1" class="hash-link" href="#why-docker-swarm-and-is-there-kubernetes-support" title="Direct link to heading">#</a></h2><p><a href="https://docs.docker.com/engine/swarm/">Docker Swarm</a> was chosen for it&#x27;s simplicity, so that previously unskilled system administrators can quickly up-skill in the techniques of private and public cloud infrastructure management. We wanted to democratise the containerisation benefits of AWS/Kubernetes style public cloud deployments for developing nations.</p><p>Some nations may be located far from a developed world datacentre. Many nations may not be able to legally support international data storage of citizen data. Often getting the legal approval requires regulatory change which obviously can take some time. In the short term, these nations may not have access to the development skills necessary to manage a complicated distributed cloud deployment, so ease-of-use is paramount.</p><p>Docker Swarm makes it easy to commence service distribution privately and then migrate publicly when an organisation is ready to do so. Docker Swarm automatically configures a &quot;round robin&quot; load balanced cluster, and provides Service Discovery out-the-box.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="how-do-i-build-my-containers-and-push-a-version-to-dockerhub"></a>How do I build my containers and push a version to Dockerhub?<a aria-hidden="true" tabindex="-1" class="hash-link" href="#how-do-i-build-my-containers-and-push-a-version-to-dockerhub" title="Direct link to heading">#</a></h2><p>There are a number of docker scripts available via <code>yarn</code>. If you need to manage the docker containers, some of these scripts may be useful.</p><p>The <code>yarn compose:push:version</code> script will version and push your containers.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="how-do-i-manage-a-docker-swarm"></a>How do I manage a Docker Swarm?<a aria-hidden="true" tabindex="-1" class="hash-link" href="#how-do-i-manage-a-docker-swarm" title="Direct link to heading">#</a></h2><p>A number of other useful Docker commands you will need in order to manage the swarm cluster are accessible <a href="https://github.com/opencrvs/opencrvs-core/tree/master/infrastructure/server-setup">here</a>.</p><p><strong>Coming soon</strong></p><p>We are working on a <a href="https://kubernetes.io/">Kubernetes</a> implementation, so that smaller nations can have the option to hand over swarm system administration to a 3rd party such as AWS / Google.</p></div></article><div class="margin-vert--lg"><nav class="pagination-nav"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/opencrvs-core/docs/technology/technicalInteroperability"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">« Technical interoperability</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/opencrvs-core/docs/technology/webhooks"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Webhook integration »</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_TbNY"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#how-can-i-install-and-manage-an-opencrvs-server-cluster-of-nodes" class="table-of-contents__link">How can I install and manage an OpenCRVS server cluster of nodes?</a></li><li><a href="#how-can-i-set-up-continuous-integration-and-delivery" class="table-of-contents__link">How can I set up continuous integration and delivery?</a></li><li><a href="#why-docker-swarm-and-is-there-kubernetes-support" class="table-of-contents__link">Why Docker Swarm? ...and is there Kubernetes support?</a></li><li><a href="#how-do-i-build-my-containers-and-push-a-version-to-dockerhub" class="table-of-contents__link">How do I build my containers and push a version to Dockerhub?</a></li><li><a href="#how-do-i-manage-a-docker-swarm" class="table-of-contents__link">How do I manage a Docker Swarm?</a></li></ul></div></div></div></div></main></div></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="/opencrvs-core/" class="nav-home"><img src="/opencrvs-core/img/logo.svg" alt="OpenCRVS is a digital public good to help achieve universal civil registration and evidence-based decision making in all country contexts" width="125" height="28.47"></a><div><h5>Docs</h5><a href="/opencrvs-core/docs/system_overview/introduction">System overview</a><a href="/opencrvs-core/#">User types</a><a href="/opencrvs-core/docs/core_functions/notifyAVitalEvent">Core functions</a><a href="/opencrvs-core/docs/support_functions/login">Support functions</a><a href="/opencrvs-core/docs/system_admin/userTeam">System admin functions</a><a href="/opencrvs-core/docs/technology/technologyIntroduction">Technology</a></div><div><h5>Community</h5><a href="/opencrvs-core/docs/community/introduction">Community</a><a href="/opencrvs-core/docs/community/contributing">Contributing</a><a href="/opencrvs-core/docs/community/implementations">Implementations</a><a href="/opencrvs-core/docs/community/team">Team</a></div><div><h5>Legal</h5><a href="https://www.plan.org.au/contact/privacy" target="_blank">Privacy</a><a href="https://www.opencrvs.org/license" target="_blank">License</a></div><div><h5>Social</h5><a class="gitter">Gitter</a><a href="https://github.com/opencrvs/opencrvs-core" target="_blank">GitHub</a><a class="github-button" href="https://github.com/opencrvs/opencrvs-core/subscription" data-icon="octicon-eye" aria-label="Watch opencrvs/opencrvs-core on GitHub">Watch</a><br><a class="github-button" href="https://github.com/opencrvs/opencrvs-core" data-icon="octicon-star" data-count-href="/opencrvs/opencrvs-core/stargazers" data-show-count="true" data-count-aria-label="# stargazers on GitHub" aria-label="Star this project on GitHub">Star</a></div></section><section class="copyright">© All rights reserved Plan International 2020. Plan International Australia will collect your information if you choose to join our community for the sole purpose of keeping you informed of OpenCRVS updates. For more information please access Plan International Australia’s Privacy Statement.</section></footer></div>
<script src="/opencrvs-core/styles.b7b53c42.js"></script>
<script src="/opencrvs-core/runtime~main.58c795d9.js"></script>
<script src="/opencrvs-core/main.38a90617.js"></script>
<script src="/opencrvs-core/1.be20b565.js"></script>
<script src="/opencrvs-core/2.f73ed700.js"></script>
<script src="/opencrvs-core/3.960e5f24.js"></script>
<script src="/opencrvs-core/1be78505.d797ccac.js"></script>
<script src="/opencrvs-core/349c6f4f.d22bee8a.js"></script>
<script src="/opencrvs-core/d61f2702.0b4df099.js"></script>
</body>
</html>